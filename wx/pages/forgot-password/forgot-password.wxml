<!--pages/forgot-password/forgot-password.wxml-->
<view class="container">
  <view class="header">
    <text class="icon">🔐</text>
    <text class="title">重置密码</text>
    <text class="subtitle">通过邮箱验证找回密码</text>
  </view>

  <view class="form-section">
    <view class="input-group">
      <view class="input-label">
        <text class="icon">📧</text>
        <text>邮箱</text>
      </view>
      <view class="email-group">
        <input 
          class="input-field email-input" 
          type="text" 
          placeholder="请输入注册邮箱"
          value="{{email}}"
          bindinput="onEmailInput"
        />
        <button 
          class="verify-btn" 
          bindtap="sendVerificationCode"
          disabled="{{codeCountdown > 0 || !email}}"
        >
          {{codeCountdown > 0 ? codeCountdown + 's' : '发送验证码'}}
        </button>
      </view>
    </view>

    <view class="input-group">
      <view class="input-label">
        <text class="icon">🔢</text>
        <text>验证码</text>
      </view>
      <input 
        class="input-field" 
        type="number" 
        placeholder="请输入6位验证码"
        value="{{verificationCode}}"
        bindinput="onVerificationCodeInput"
        maxlength="6"
      />
    </view>

    <view class="input-group">
      <view class="input-label">
        <text class="icon">🔒</text>
        <text>新密码</text>
      </view>
      <input 
        class="input-field" 
        type="{{showPassword ? 'text' : 'password'}}" 
        placeholder="请输入新密码（至少6位）"
        value="{{newPassword}}"
        bindinput="onNewPasswordInput"
      />
      <text class="toggle-password" bindtap="togglePassword">
        {{showPassword ? '👁️' : '👁️‍🗨️'}}
      </text>
    </view>

    <view class="input-group">
      <view class="input-label">
        <text class="icon">🔒</text>
        <text>确认密码</text>
      </view>
      <input 
        class="input-field" 
        type="{{showConfirmPassword ? 'text' : 'password'}}" 
        placeholder="请再次输入新密码"
        value="{{confirmPassword}}"
        bindinput="onConfirmPasswordInput"
      />
      <text class="toggle-password" bindtap="toggleConfirmPassword">
        {{showConfirmPassword ? '👁️' : '👁️‍🗨️'}}
      </text>
    </view>

    <button 
      class="reset-btn" 
      bindtap="handleResetPassword"
      loading="{{loading}}"
      disabled="{{loading}}"
    >
      {{loading ? '重置中...' : '重置密码'}}
    </button>

    <view class="back-section">
      <text class="back-link" bindtap="goBack">返回登录</text>
    </view>
  </view>
</view>
